
jQuery(document).ready((function(e){var d;e("#edd_license_enabled").on("change",(function(){e(".edd-custom-price-option-section--software-licensing").toggle(e(this).is(":checked"))})).trigger("change"),e("#sl-retro-type").change((function(){var d=e(this).val(),n=e("#sl-retro-single-wrapper");"all"==d?n.hide():(n.show(),n.find(".edd-select-chosen").css("width","auto"))})),e(".edd-sl-adjust-limit").click((function(d){d.preventDefault();var n=e(this),t={action:"edd_sl_"+n.data("action")+"_limit",license:n.data("id"),download:n.data("download")};n.toggleClass("button-disabled"),e.post(ajaxurl,t,(function(d,i){n.toggleClass("button-disabled"),e("#edd-sl-"+t.license+"-limit").text(d),e('span[data-parent="'+t.license+'"]').text(d)}))})),e("input#edd_sl_disable_renewal_discount").on("change",(function(){var d=e(this).is(":checked"),n=e("#edd_sl_renewal_discount");d?n.prop("readonly","readonly").prop("disabled","disabled"):n.removeProp("readonly").removeProp("disabled")})),e("select#_edd_product_type, input#edd_license_enabled, input#edd_sl_beta_enabled").on("change",(function(){var d=e("#_edd_product_type").val(),n=e("#edd_license_enabled").is(":checked"),t=e("#edd_sl_beta_enabled").is(":checked"),i=e(".edd_sl_toggled_row"),a=e(".edd_sl_beta_toggled_row"),s=e(".edd_sl_beta_bundle_row"),l=e(".edd_sl_beta_no_bundle_row");if(!n)return i.hide(),void e("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!0).trigger("chosen:updated");t?a.show():a.hide(),"bundle"==d?(i.hide(),i.not(".edd_sl_nobundle_row").show(),a.hide(),e("#edd_sl_beta_enabled").checked=!1,l.hide(),s.show()):(i.show(),l.show(),s.hide()),e("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!1).trigger("chosen:updated")})),e("#edd_license_enabled").is(":checked")||e("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!0).trigger("chosen:updated"),e('input[name="edd_sl_is_lifetime"]').change((function(){1==e(this).val()?e("#edd_license_length_wrapper").hide():e("#edd_license_length_wrapper").show()})),e("#edit_expiration_is_lifetime").change((function(){e(this).is(":checked")?e("#edit_expiration_date").attr("disabled","disabled"):e("#edit_expiration_date").removeAttr("disabled")})),e("#edd_sl_upgrade_paths_wrapper").on("change","select.edd-sl-upgrade-path-download",(function(){var d=e(this),n=d.val();if(parseInt(n)>0){var t={action:"edd_check_for_download_price_variations",download_id:n};e.ajax({type:"POST",data:t,url:ajaxurl,success:function(e){var n=d.parents(".edd-form-group"),t=n.next().find(".edd-form-group__control");if(""==e)t.html(edd_sl.no_prices);else{var i=n.next().find(".edd-sl-upgrade-path-price-id"),a=d.parents(".edd_repeatable_row").data("key"),s="edd_sl_upgrade_paths["+a+"][price_id]",l="edd_sl_upgrade_paths_"+a+"_price_id";e=e.replace('name="edd_price_option"','name="'+s+'" id="'+l+'"'),i.remove(),t.html(e)}}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))}})),e("#edd_sl_upgrade_paths_wrapper").on("DOMNodeInserted",(function(d){var n=e(d.target);if(n.is(".edd-repeatable-upgrade-wrapper")){var t=n.find(".edd-sl-upgrade-price-control"),i=n.attr("data-key");t.html(edd_sl.no_prices),n.find("label").each((function(){var d=e(this).attr("for");if(void 0!==d){var n=d.replace(/(\d+)/,parseInt(i));e(this).attr("for",n)}})),n.find(".sl-upgrade-prorate").find("input").prop("checked",!1)}})),e(".edd_sl_upgrade_link").on("click",(function(){e(this).select()})),e("#edd-sl-license-delete-confirm").change((function(){var d=e("#edd-sl-delete-license");e(this).prop("checked")?d.attr("disabled",!1):d.attr("disabled",!0)})),e(".edd-sl-edit-license-exp-date").on("click",(function(d){var n,t;d.preventDefault(),n=e(this),t=e("input.edd-sl-license-exp-date"),n.text()===edd_sl.action_edit?(n.data("current-value",t.val()),n.text(edd_sl.action_cancel)):(t.val(n.data("current-value")),e("#edd_sl_update_license").fadeOut("fast",(function(){e(this).css("display","none")})),n.text(edd_sl.action_edit)),e(".edd-sl-license-exp-date").toggle()})),e(".edd-sl-license-exp-date, #license_price_id").on("change",(function(){e("#edd_sl_update_license").fadeIn("fast").css("display","inline-block")})),e("#edd-sl-regenerate-key").on("click",(function(d){if(0!=confirm(edd_sl.regenerate_notice)){var n=e("#license-key"),t=e(this);t.css("color","#999").css("pointer-events","none");var i={action:"edd_sl_regenerate_license",license_id:t.data("license-id"),nonce:t.data("nonce")};return e.ajax({type:"POST",data:i,dataType:"json",url:ajaxurl,success:function(e){e.success?n.fadeTo("fast",".1",(function(){n.text(e.key).fadeTo("fast","1",(function(){t.css("color","").css("pointer-events","")}))})):t.css("color","").css("pointer-events","")}}).fail((function(e){window.console&&window.console.log&&console.log(e)})),!1}})),e("#edd_sl_send_renewal_notice").on("click",(function(d){d.preventDefault(),e(this).text()===edd_sl.send_notice?(e(".edd-sl-license-card-notices").fadeIn("fast").css("display","table-row"),e(this).text(edd_sl.cancel_notice)):(e(".edd-sl-license-card-notices").fadeOut("fast",(function(){e(".edd-sl-license-card-notices").css("display","none")})),e(this).text(edd_sl.send_notice))})),e("#edd_readme_cache button").on("click",(function(d){d.preventDefault();var n={action:"edd_sl_clear_readme",download_id:edd_sl.download,nonce:edd_sl.readme_nonce};e.ajax({type:"POST",data:n,url:ajaxurl,success:function(d){var n="error inline";d.success&&(n="updated inline"),e("#edd_readme_cache").empty().append(e("<div />",{class:n}).append(e("<p />",{text:d.data.message})))}})})),e('.edd-sl-license-card-notices input[type="submit"]').on("click",(function(d){d.preventDefault();var n=e(this);n.attr("disabled",!0),n.next(".spinner").css("visibility","visible");var t=e(this).parents("td");t.find(".notice.error").remove();var i={action:"edd_sl_send_renewal_notice",license_id:e(this).data("license-id"),notice_id:e("#edd_sl_renewal_notice").val()};return e.ajax({type:"POST",data:i,dataType:"json",url:ajaxurl,success:function(e){e.success?window.location=e.url:e.message&&(n.attr("disabled",!1),n.next(".spinner").css("visibility","hidden"),t.append('<div class="notice error inline"><p>'+e.message+"</p></div>"))}}).fail((function(e){window.console&&window.console.log&&console.log(e)})),!0})),window.formfield="",e(document.body).on("click",".edd_upload_banner_button",(function(n){n.preventDefault();var t=e(this);window.formfield=e(this).closest(".edd_sl_banner_container"),d||((d=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:t.data("uploader-title"),button:{text:t.data("uploader-button-text")},multiple:!1})).on("menu:render:default",(function(e){e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set({})})),d.on("insert",(function(){d.state().get("selection").each((function(e,d){e=e.toJSON(),window.formfield.find("input").val(e.url)}))}))),d.open()})),window.formfield="",e("input#edd_license_enabled, input#edd_sr_rollouts_enabled, input#edd_sr_batch_enabled, input#edd_sr_version_enabled").on("change",(function(){var d=e("#edd_license_enabled").is(":checked"),n=e("#edd_sr_rollouts_enabled").is(":checked"),t=e("#edd_sr_batch_enabled").is(":checked"),i=e("#edd_sr_version_enabled").is(":checked"),a=e(".edd_sr_toggled_row"),s=e(".edd_sr_batch_row"),l=e(".edd_sr_version_row"),o=e("#edd_sr_batch_max");return d?(e("input#edd_sr_rollouts_enabled").prop("disabled",!1).trigger("chosen:updated"),n?(a.show(),e("input#edd_sr_batch_enabled").prop("disabled",!1).trigger("chosen:updated"),e("input#edd_sr_version_enabled").prop("disabled",!1).trigger("chosen:updated"),t?(s.show(),o.prop("disabled",!1)):(s.hide(),o.prop("disabled",!0)),void(i?l.show():l.hide())):(e("input#edd_sr_batch_enabled").prop("disabled",!0).trigger("chosen:updated"),e("input#edd_sr_version_enabled").prop("disabled",!0).trigger("chosen:updated"),a.hide(),s.hide(),l.hide(),void o.prop("disabled",!0))):(e("input#edd_sr_rollouts_enabled").prop("disabled",!0).trigger("chosen:updated"),a.hide(),a.hide(),s.hide(),l.hide(),void o.prop("disabled",!0))}))}));

jQuery(document).ready((function(e){var d;e("#edd_license_enabled").on("change",(function(){e(".edd-custom-price-option-section--software-licensing").toggle(e(this).is(":checked"))})).trigger("change"),e("#sl-retro-type").change((function(){var d=e(this).val(),n=e("#sl-retro-single-wrapper");"all"==d?n.hide():(n.show(),n.find(".edd-select-chosen").css("width","auto"))})),e(".edd-sl-adjust-limit").click((function(d){d.preventDefault();var n=e(this),t={action:"edd_sl_"+n.data("action")+"_limit",license:n.data("id"),download:n.data("download")};n.toggleClass("button-disabled"),e.post(ajaxurl,t,(function(d,i){n.toggleClass("button-disabled"),e("#edd-sl-"+t.license+"-limit").text(d),e('span[data-parent="'+t.license+'"]').text(d)}))})),e("input#edd_sl_disable_renewal_discount").on("change",(function(){var d=e(this).is(":checked"),n=e("#edd_sl_renewal_discount");d?n.prop("readonly","readonly").prop("disabled","disabled"):n.removeProp("readonly").removeProp("disabled")})),e("select#_edd_product_type, input#edd_license_enabled, input#edd_sl_beta_enabled").on("change",(function(){var d=e("#_edd_product_type").val(),n=e("#edd_license_enabled").is(":checked"),t=e("#edd_sl_beta_enabled").is(":checked"),i=e(".edd_sl_toggled_row"),a=e(".edd_sl_beta_toggled_row"),s=e(".edd_sl_beta_bundle_row"),l=e(".edd_sl_beta_no_bundle_row");if(!n)return i.hide(),void e("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!0).trigger("chosen:updated");t?a.show():a.hide(),"bundle"==d?(i.hide(),i.not(".edd_sl_nobundle_row").show(),a.hide(),e("#edd_sl_beta_enabled").checked=!1,l.hide(),s.show()):(i.show(),l.show(),s.hide()),e("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!1).trigger("chosen:updated")})),e("#edd_license_enabled").is(":checked")||e("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!0).trigger("chosen:updated"),e('input[name="edd_sl_is_lifetime"]').change((function(){1==e(this).val()?e("#edd_license_length_wrapper").hide():e("#edd_license_length_wrapper").show()})),e("#edit_expiration_is_lifetime").change((function(){e(this).is(":checked")?e("#edit_expiration_date").attr("disabled","disabled"):e("#edit_expiration_date").removeAttr("disabled")})),e("#edd_sl_upgrade_paths_wrapper").on("change","select.edd-sl-upgrade-path-download",(function(){var d=e(this),n=d.val();if(parseInt(n)>0){var t={action:"edd_check_for_download_price_variations",download_id:n};e.ajax({type:"POST",data:t,url:ajaxurl,success:function(e){var n=d.parents(".edd-form-group"),t=n.next().find(".edd-form-group__control");if(""==e)t.html(edd_sl.no_prices);else{var i=n.next().find(".edd-sl-upgrade-path-price-id"),a=d.parents(".edd_repeatable_row").data("key"),s="edd_sl_upgrade_paths["+a+"][price_id]",l="edd_sl_upgrade_paths_"+a+"_price_id";e=e.replace('name="edd_price_option"','name="'+s+'" id="'+l+'"'),i.remove(),t.html(e)}}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))}})),e("#edd_sl_upgrade_paths_wrapper").on("DOMNodeInserted",(function(d){var n=e(d.target);if(n.is(".edd-repeatable-upgrade-wrapper")){var t=n.find(".edd-sl-upgrade-price-control"),i=n.attr("data-key");t.html(edd_sl.no_prices),n.find("label").each((function(){var d=e(this).attr("for");if(void 0!==d){var n=d.replace(/(\d+)/,parseInt(i));e(this).attr("for",n)}})),n.find(".sl-upgrade-prorate").find("input").prop("checked",!1)}})),e(".edd_sl_upgrade_link").on("click",(function(){e(this).select()})),e("#edd-sl-license-delete-confirm").change((function(){var d=e("#edd-sl-delete-license");e(this).prop("checked")?d.attr("disabled",!1):d.attr("disabled",!0)})),e(".edd-sl-edit-license-exp-date").on("click",(function(d){var n,t;d.preventDefault(),n=e(this),t=e("input.edd-sl-license-exp-date"),n.text()===edd_sl.action_edit?(n.data("current-value",t.val()),n.text(edd_sl.action_cancel)):(t.val(n.data("current-value")),e("#edd_sl_update_license").fadeOut("fast",(function(){e(this).css("display","none")})),n.text(edd_sl.action_edit)),e(".edd-sl-license-exp-date").toggle()})),e(".edd-sl-license-exp-date, #license_price_id").on("change",(function(){e("#edd_sl_update_license").fadeIn("fast").css("display","inline-block")})),e("#edd-sl-regenerate-key").on("click",(function(d){if(0!=confirm(edd_sl.regenerate_notice)){var n=e("#license-key"),t=e(this);t.css("color","#999").css("pointer-events","none");var i={action:"edd_sl_regenerate_license",license_id:t.data("license-id"),nonce:t.data("nonce")};return e.ajax({type:"POST",data:i,dataType:"json",url:ajaxurl,success:function(e){e.success?n.fadeTo("fast",".1",(function(){n.text(e.key).fadeTo("fast","1",(function(){t.css("color","").css("pointer-events","")}))})):t.css("color","").css("pointer-events","")}}).fail((function(e){window.console&&window.console.log&&console.log(e)})),!1}})),e("#edd_sl_send_renewal_notice").on("click",(function(d){d.preventDefault(),e(this).text()===edd_sl.send_notice?(e(".edd-sl-license-card-notices").fadeIn("fast").css("display","table-row"),e(this).text(edd_sl.cancel_notice)):(e(".edd-sl-license-card-notices").fadeOut("fast",(function(){e(".edd-sl-license-card-notices").css("display","none")})),e(this).text(edd_sl.send_notice))})),e("#edd_readme_cache button").on("click",(function(d){d.preventDefault();var n={action:"edd_sl_clear_readme",download_id:edd_sl.download,nonce:edd_sl.readme_nonce};e.ajax({type:"POST",data:n,url:ajaxurl,success:function(d){var n="error inline";d.success&&(n="updated inline"),e("#edd_readme_cache").empty().append(e("<div />",{class:n}).append(e("<p />",{text:d.data.message})))}})})),e('.edd-sl-license-card-notices input[type="submit"]').on("click",(function(d){d.preventDefault();var n=e(this);n.attr("disabled",!0),n.next(".spinner").css("visibility","visible");var t=e(this).parents("td");t.find(".notice.error").remove();var i={action:"edd_sl_send_renewal_notice",license_id:e(this).data("license-id"),notice_id:e("#edd_sl_renewal_notice").val()};return e.ajax({type:"POST",data:i,dataType:"json",url:ajaxurl,success:function(e){e.success?window.location=e.url:e.message&&(n.attr("disabled",!1),n.next(".spinner").css("visibility","hidden"),t.append('<div class="notice error inline"><p>'+e.message+"</p></div>"))}}).fail((function(e){window.console&&window.console.log&&console.log(e)})),!0})),window.formfield="",e(document.body).on("click",".edd_upload_banner_button",(function(n){n.preventDefault();var t=e(this);window.formfield=e(this).closest(".edd_sl_banner_container"),d||((d=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:t.data("uploader-title"),button:{text:t.data("uploader-button-text")},multiple:!1})).on("menu:render:default",(function(e){e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set({})})),d.on("insert",(function(){d.state().get("selection").each((function(e,d){e=e.toJSON(),window.formfield.find("input").val(e.url)}))}))),d.open()})),window.formfield="",e("input#edd_license_enabled, input#edd_sr_rollouts_enabled, input#edd_sr_batch_enabled, input#edd_sr_version_enabled").on("change",(function(){var d=e("#edd_license_enabled").is(":checked"),n=e("#edd_sr_rollouts_enabled").is(":checked"),t=e("#edd_sr_batch_enabled").is(":checked"),i=e("#edd_sr_version_enabled").is(":checked"),a=e(".edd_sr_toggled_row"),s=e(".edd_sr_batch_row"),l=e(".edd_sr_version_row"),o=e("#edd_sr_batch_max");return d?(e("input#edd_sr_rollouts_enabled").prop("disabled",!1).trigger("chosen:updated"),n?(a.show(),e("input#edd_sr_batch_enabled").prop("disabled",!1).trigger("chosen:updated"),e("input#edd_sr_version_enabled").prop("disabled",!1).trigger("chosen:updated"),t?(s.show(),o.prop("disabled",!1)):(s.hide(),o.prop("disabled",!0)),void(i?l.show():l.hide())):(e("input#edd_sr_batch_enabled").prop("disabled",!0).trigger("chosen:updated"),e("input#edd_sr_version_enabled").prop("disabled",!0).trigger("chosen:updated"),a.hide(),s.hide(),l.hide(),void o.prop("disabled",!0))):(e("input#edd_sr_rollouts_enabled").prop("disabled",!0).trigger("chosen:updated"),a.hide(),a.hide(),s.hide(),l.hide(),void o.prop("disabled",!0))}))}));

