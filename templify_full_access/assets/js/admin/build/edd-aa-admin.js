jQuery(document).ready((function(e){e.fn.edd_all_access_duration_update=function(){var s=e("#edd_all_access_meta_all_access_duration_unit").val();"year"==s||"month"==s||"week"==s||"day"==s?e("#edd_all_access_meta_all_access_duration_number").show():(e("#edd_all_access_meta_all_access_duration_number").hide(),(e(".post-php.post-type-download").length||e(".post-new-php.post-type-download").length)&&(e("#edd_license_enabled").length&&e("#edd_license_enabled").is(":checked")?e('#edd_all_access_meta_all_access_duration_unit option[value="edd_recurring"]').html(edd_all_access_vars.sync_with_license):e('#edd_all_access_meta_all_access_duration_unit option[value="edd_recurring"]').html(edd_all_access_vars.sync_with_recurring)))},e.fn.edd_all_access_download_limit_update=function(){e(".edd_all_access_download_limit_time_period").hide(),e(" #edd_all_access_download_limit").val()>0?(e("#edd_all_access_meta_download_limit_time_period option").each((function(s,d){e(this).html(e("#edd_all_access_download_limit").val()+" "+e(this).html().substr(e(this).html().indexOf(" ")+1))})),e("#edd_all_access_meta_download_limit_time_period").show(),e("#edd_all_access_unlimited_download_limit_note").hide()):(e("#edd_all_access_meta_download_limit_time_period").hide(),e("#edd_all_access_unlimited_download_limit_note").show())},e.fn.edd_all_access_price_ids_update=function(){if(e(".edd_all_access_included_price_ids_row").hide(),e("#edd_all_access_included_price_ids").hide(),e("#edd_all_access_included_price_ids_note").hide(),e("#edd_all_access_number_of_price_ids").val()>0){var s=e("#edd_all_access_included_price_ids .edd_all_access_included_price_id_li"),d=parseInt(e("#edd_all_access_number_of_price_ids").val()),a=s.length,_=0;if(s.each((function(s,d){"none"!==e(this).css("display")&&(_+=1)})),d>_)if(d>a){var c=d-a;for(i=0;i<c;i++){var l=d-c+i+1;e("#edd_all_access_included_price_ids .edd_all_access_included_price_id_li").show(),1==l?e("#edd_all_access_included_price_ids").append('<li class="edd_all_access_included_price_id_li '+l+'"><label><input type="checkbox" name="edd_all_access_meta[included_price_ids][]" class="edd_all_access_included_price_id" value="'+l+'"> '+l+edd_all_access_vars.first_variation_string+" </label></li>"):2==l?e("#edd_all_access_included_price_ids").append('<li class="edd_all_access_included_price_id_li '+l+'"><label><input type="checkbox" name="edd_all_access_meta[included_price_ids][]" class="edd_all_access_included_price_id" value="'+l+'"> '+l+edd_all_access_vars.second_variation_string+" </label></li>"):3==l?e("#edd_all_access_included_price_ids").append('<li class="edd_all_access_included_price_id_li '+l+'"><label><input type="checkbox" name="edd_all_access_meta[included_price_ids][]" class="edd_all_access_included_price_id" value="'+l+'"> '+l+edd_all_access_vars.third_variation_string+" </label></li>"):e("#edd_all_access_included_price_ids").append('<li class="edd_all_access_included_price_id_li '+l+'"><label><input type="checkbox" name="edd_all_access_meta[included_price_ids][]" class="edd_all_access_included_price_id" value="'+l+'"> '+l+edd_all_access_vars.variation_string+" </label></li>")}}else for(c=d-_,i=0;i<c;i++)l=d-c+i+1,e("#edd_all_access_included_price_ids .edd_all_access_included_price_id_li."+l).show();else for(i=1;i<a+1;i++)i>d&&e("#edd_all_access_included_price_ids .edd_all_access_included_price_id_li."+i).hide();e(".edd_all_access_included_price_ids_row").show(),e("#edd_all_access_included_price_ids").show(),e("#edd_all_access_included_price_ids_note").hide()}else e(".edd_all_access_included_price_ids_row").hide(),e("#edd_all_access_included_price_ids").hide(),e("#edd_all_access_included_price_ids_note").show()},e.fn.edd_all_access_exclude_show_hide=function(){const s=e("#_edd_product_type").val();return"all_access"===s?(e("#edd_downloads_all_access").show(),e("#edd_all_access_exclude_single_option").hide(),e(".edd-all-access-exclude-price-id").hide(),e("#edd_product_files").hide()):(e("#edd_downloads_all_access").hide(),e("#edd_product_files").show(),e("#edd_variable_pricing").is(":checked")?(e("#edd_all_access_exclude_single_option").hide(),e(".edd-all-access-exclude-price-id").show()):(e("#edd_all_access_exclude_single_option").show(),e(".edd-all-access-exclude-price-id").hide())),"bundle"!==s&&"all_access"!==s||(e("#edd_all_access_exclude_single_option").hide(),e(".edd-all-access-exclude-price-id").hide()),this},e(document).on("change","#_edd_product_type, #edd_variable_pricing",(function(s){e(document).edd_all_access_exclude_show_hide()})),"all_access"===e(document).find("#_edd_product_type").val()?e("#edd_product_files").hide():e("#edd_downloads_all_access").hide(),{init:function(){this.submit(),this.dismiss_message()},submit:function(){var s=this;e(document.body).on("submit","#edd-tools-all-access-process-form",(function(d){d.preventDefault();var a=e(this).find('input[type="submit"]');if(!a.hasClass("button-disabled")){var _={force_regeneration:"no",mode:"process_passes",nonce:e(this).find('input[name="edd_all_access_ajax_process"]').val()};a.addClass("button-disabled"),e(this).find(".notice-wrap").remove(),e(this).append('<div class="notice-wrap"><span class="spinner is-active"></span><div class="edd-progress"><div></div></div></div>'),s.process_step(0,_,s)}}))},process_step:function(s,d,a){e.ajax({type:"POST",url:ajaxurl,data:{form:d,action:"edd_all_access_do_ajax_process",step:s},dataType:"json",success:function(s){if("done"==s.step||s.error||s.success){var _=e("#edd-tools-all-access-process-form").find(".edd-progress").parent().parent(),c=_.find(".notice-wrap");if(_.find(".button-disabled").removeClass("button-disabled"),s.error){var i=s.message;c.html('<div class="updated error"><p>'+i+"</p></div>")}else if(s.success){var l=s.message;c.html('<div id="edd-all-access-process-success" class="updated notice is-dismissible"><p>'+l+'<span class="notice-dismiss"></span></p></div>')}else c.remove(),window.location=s.url}else e("#edd-tools-all-access-process-form .edd-progress div").animate({width:s.percentage+"%"},50,(function(){})),a.process_step(parseInt(s.step),d,a)}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))},dismiss_message:function(){e("body").on("click","#edd-all-access-process-success .notice-dismiss",(function(){e("#edd-all-access-process-success").parent().slideUp("fast")}))}}.init(),{init:function(){this.submit(),this.dismiss_message()},submit:function(){var s=this;e(document.body).on("submit","#edd-aa-customer-tools-regenerate-passes-form",(function(d){d.preventDefault();var a=e(this).find('input[type="submit"]');if(!a.hasClass("button-disabled")){var _={force_regeneration:"yes",customer_id:e(this).find('input[name="customer_id"]').val(),nonce:e(this).find('input[name="edd_all_access_ajax_process"]').val()};a.addClass("button-disabled"),e(this).find(".notice-wrap").remove(),e(this).append('<div class="notice-wrap"><span class="spinner is-active"></span><div class="edd-progress"><div></div></div></div>'),s.process_step(0,_,s)}}))},process_step:function(s,d,a){e.ajax({type:"POST",url:ajaxurl,data:{form:d,action:"edd_all_access_do_ajax_process",step:s},dataType:"json",success:function(s){if("done"==s.step||s.error||s.success){var _=e("#edd-aa-customer-tools-regenerate-passes-form").find(".edd-progress").parent().parent(),c=_.find(".notice-wrap");if(_.find(".button-disabled").removeClass("button-disabled"),s.error){var i=s.message;c.html('<div class="updated error"><p>'+i+"</p></div>")}else if(s.success){var l=s.message;c.html('<div id="edd-all-access-regenerate-customer-passes-success" class="updated notice is-dismissible"><p>'+l+'<span class="notice-dismiss"></span></p></div>')}else c.remove(),window.location=s.url}else e("#edd-aa-customer-tools-regenerate-passes-form .edd-progress div").animate({width:s.percentage+"%"},50,(function(){})),d.mode=s.mode,d.force_regeneration=s.force_regeneration,a.process_step(parseInt(s.step),d,a)}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))},dismiss_message:function(){e("body").on("click","#edd-all-access-regenerate-customer-passes-success .notice-dismiss",(function(){e("#edd-all-access-regenerate-customer-passes-success").parent().slideUp("fast")}))}}.init(),e(".edd-select-chosen.edd_all_access_meta_all_access_categories").css("width","100%"),e(document).on("change ","#edd_all_access_meta_all_access_duration_unit",(function(){e(document).edd_all_access_duration_update()})),e(document).on("change","#edd_license_enabled",(function(){e(document).edd_all_access_duration_update()})),e(document).on("change","#edd_all_access_download_limit",(function(){e(document).edd_all_access_download_limit_update()})),e(document).on("change","#edd_all_access_number_of_price_ids",(function(){e(document).edd_all_access_price_ids_update()})),edd_aa_manage_update_check_complete=!1,e(document).on("submit","#edit-all-access-pass",(function(s){edd_aa_manage_update_check_complete||(s.preventDefault(),e("#time_of_activation_meta").is(":checked")?(edd_aa_manage_update_check_complete=!0,e("#edd_update_all_access_pass").trigger("click")):(start_date=e("#edd_all_access_meta_all_access_start_date").val(),duration_number=e("#edd_all_access_meta_all_access_duration_number").val(),duration_unit=e("#edd_all_access_meta_all_access_duration_unit").val(),edd_all_access_vars.all_access_pass_id||(edd_aa_manage_update_check_complete=!0,e("#edd_update_all_access_pass").trigger("click")),e.ajax({type:"POST",url:ajaxurl,data:{start_date,duration_number,duration_unit,all_access_pass_id:edd_all_access_vars.all_access_pass_id,action:"edd_all_access_expiration_check"},dataType:"json",success:function(s){s.error?(edd_aa_manage_update_check_complete=!0,e("#edd_update_all_access_pass").trigger("click")):s.would_expire?(edd_aa_manage_update_check_complete=confirm(edd_all_access_vars.manage_all_access_expire_warning),edd_aa_manage_update_check_complete&&e("#edd_update_all_access_pass").trigger("click")):(edd_aa_manage_update_check_complete=!0,e("#edd_update_all_access_pass").trigger("click"))}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))))}))}));