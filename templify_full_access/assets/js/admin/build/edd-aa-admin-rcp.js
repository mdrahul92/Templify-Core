jQuery(document).ready((function(s){({init:function(){this.submit(),this.dismiss_message()},submit:function(){var e=this;s(document.body).on("submit","#edd-tools-all-access-rcp-migrate-form",(function(i){i.preventDefault();var a=s(this).find('input[type="submit"]');if(!a.hasClass("button-disabled")){var t=s(this).serialize();a.addClass("button-disabled"),s(this).find(".notice-wrap").remove(),s(this).append('<div class="notice-wrap"><span class="spinner is-active"></span><div class="edd-progress"><div></div></div></div>'),e.process_step(0,t,e)}}))},process_step:function(e,i,a){s.ajax({type:"POST",url:ajaxurl,data:{form:i,action:"edd_all_access_do_ajax_rcp_migrate",step:e},dataType:"json",success:function(e){if(console.log(e),"done"==e.step||e.error||e.success){var t=s("#edd-tools-all-access-rcp-migrate-form").find(".edd-progress").parent().parent(),d=t.find(".notice-wrap");if(t.find(".button-disabled").removeClass("button-disabled"),e.error){var o=e.message;d.html('<div class="updated error"><p>'+o+"</p></div>")}else if(e.success){var c=e.message;d.html('<div id="edd-all-access-process-success" class="updated notice is-dismissible"><p>'+c+'<span class="notice-dismiss"></span></p></div>')}else d.remove(),window.location=e.url}else s("#edd-tools-all-access-rcp-migrate-form .edd-progress div").animate({width:e.percentage+"%"},50,(function(){})),a.process_step(parseInt(e.step),i,a)}}).fail((function(s){window.console&&window.console.log&&console.log(s)}))},dismiss_message:function(){s("body").on("click","#edd-all-access-process-success .notice-dismiss",(function(){s("#edd-all-access-process-success").parent().slideUp("fast")}))}}).init()}));